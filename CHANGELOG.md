# 更新日志

本文档记录了项目的所有重要变更。

格式基于 [Keep a Changelog](https://keepachangelog.com/zh-CN/1.0.0/)，
项目遵循 [语义化版本](https://semver.org/lang/zh-CN/spec/v2.0.0.html) 规范。

## [未发布] - 2025-01-07

### ✨ 新增功能

#### 主题系统
- **8 款精美配色主题**：可选择紫罗兰绽、日落余晖、Supabase、粘土形态、自然翠绿、海洋微风、量子玫瑰、禅意花园
- **亮暗模式切换**：在亮色和暗色模式之间无缝切换，即时视觉反馈
- **主题持久化**：自动保存并恢复您的主题偏好设置
- **平滑主题过渡**：智能过渡系统防止主题切换时的视觉闪烁

#### 侧边栏导航
- **响应式侧边栏**：可折叠侧边栏，自适应移动端和桌面端屏幕
- **用户信息区**：显示用户头像、姓名和邮箱
- **菜单组织**：支持可折叠子菜单的层级导航
- **快捷设置入口**：便捷访问主题控制和文档链接
- **主题感知样式**：侧边栏颜色自动适配所选主题和模式

#### 认证界面
- **表单验证**：使用 Zod 模式进行注册和登录表单的客户端验证
- **友好的错误提示**：为验证错误提供清晰的反馈信息
- **安全的输入处理**：密码字段支持可见性切换

### 🔧 改进优化

#### 性能提升
- **优化主题切换**：通过临时禁用 CSS 过渡消除主题切换时的闪烁
- **减少 Hydration 不匹配**：改进主题组件的服务端渲染兼容性
- **高效状态管理**：优化主题和侧边栏控制的 React 状态更新

#### 用户体验
- **即时主题应用**：主题现在可以立即应用，无视觉瑕疵
- **一致的配色方案**：所有 UI 组件通过 CSS 变量正确继承主题颜色
- **更好的移动体验**：移动端侧边栏转换为滑出式抽屉
- **键盘快捷键**：按 Cmd/Ctrl+B 切换侧边栏显示

#### 代码质量
- **类型安全**：主题系统和组件完全支持 TypeScript
- **CSS 架构**：使用 OKLch 色彩空间组织主题变量，确保颜色一致性
- **组件模块化**：将主题逻辑分离为可复用的 hooks 和组件
- **文档完善**：为主题系统添加了全面的技术文档

### 🐛 问题修复

#### 主题系统
- **侧边栏闪烁**：解决了在亮暗模式切换时的视觉闪烁问题
- **缺失的主题变量**：为所有 8 个主题添加了完整的侧边栏颜色变量
- **Hydration 警告**：修复了主题组件中的 React hydration 不匹配
- **CSS 过渡冲突**：移除了导致不必要动画的全局 CSS 过渡

#### 样式问题
- **侧边栏颜色应用**：确保侧边栏在亮暗模式下正确应用主题特定颜色
- **边框一致性**：修复了不同主题间边框颜色不一致的问题
- **焦点环可见性**：改进焦点指示器的可见性，提升无障碍访问

### 🔒 安全性

- **输入清理**：添加 Zod 验证以防止提交格式错误的数据
- **XSS 防护**：对表单中的用户生成内容进行适当转义

### 📚 技术细节

#### 架构变更
- 实现 `.theme-transitioning` CSS 类来控制过渡行为
- 添加 `requestAnimationFrame` 时序以实现平滑的 DOM 更新
- 集成 Tailwind CSS 4 的 `@theme inline` 进行变量映射
- 创建自定义 hooks（`useColorTheme`）用于主题状态管理

#### 依赖项
- 添加 `next-themes` 用于亮暗模式管理
- 集成 `@radix-ui` 组件以实现无障碍 UI 原语
- 配置 Zod 进行运行时类型验证

---

## [0.1.0] - 2025-01-02

### ✨ 新增功能

- 使用 Next.js 15 初始化项目
- 基于 Better Auth 的基础认证系统
- Prisma ORM 与 PostgreSQL 集成
- 用户注册和登录功能
- 仪表板布局结构

---

## 说明

### 破坏性变更
本次发布无破坏性变更。

### 迁移指南
无需迁移。所有变更向后兼容。

### 已知问题
- 主题选择器在极小屏幕（<320px）上可能显示不正确
- 某些第三方组件可能无法完全遵循主题颜色

### 即将推出
- 自定义主题创建器
- 主题导入/导出功能
- 更细粒度的主题自定义选项
- 高对比度模式的无障碍改进

---
